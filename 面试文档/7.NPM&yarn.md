## [字节的一个小问题 npm 和 yarn不一样吗](https://juejin.cn/post/7060844948316225572?share_token=c36973a3-1d1f-4f69-be6d-6adc8b4fad92)
![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fbc0e4e27c14500a2a9e4fcf4757fae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1630:0:0:0.awebp?)
## npm
1. NPM 在2.0的版本的时候，依赖包是通过嵌套方式来进行处理（文件目录太长，可能会导致Window都不能删除文件）
2. 文件依赖，可能会存在大量的重复的安装
3. NPM3.x和yarn 采用的是扁平方式处理依赖
## yarn解决的问题
1. 之前的NPM版本， 没用package-lock.json机制，也就是不会进行<font size=5 color="red">版本锁定</font>，会出现很多问题,
2. <font size=5 color="red">采用模块扁平化的安装方式：</font> 将不同版本的依赖包,按照一定的策略，归结为单个版本;以避免创建多个版本造成工程的冗余(目前版本的npm也有相同的优化)
3.  <font size=5 color="red">网络性能更好：</font>yarn采用了<font color="red">请求排队的理念</font>,类似于并发池连接,能够更好的利用网络资源;同时也引入了一种安装失败的重试机制
4.  <font size=5 color="red">采用缓存机制,实现了离线模式</font>(目前的NPM也有类似的实现机制)
5.  <font size=5 color="red">相比于npm,Yarn另一个显著的区别就是yarn.lock的子依赖的版本不是固定的版本</font>

## yarn 的安装机制
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a25fa69736e4f0aacee1372476ece5c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1630:0:0:0.awebp?)

## pnpm
1. pnpm 运行起来非常的快
2. pnpm 采用一中巧妙的方式，利用<font color="red">硬链接和符号链接</font>，避免复制所有本地缓存源文件，这是yarn的最大的性能弱点之一。